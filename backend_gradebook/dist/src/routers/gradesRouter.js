"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const auth_js_1 = require("../modules/auth.js");
const gradesValidation_js_1 = require("../validations/gradesValidation.js");
const grades_js_1 = require("../handlers/grades.js");
const middleware_js_1 = require("../modules/middleware.js");
const userTypes_js_1 = require("../enums/userTypes.js");
const gradesRouter = (0, express_1.Router)();
gradesRouter.post('', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher]), (0, gradesValidation_js_1.validateCreateGrade)(), middleware_js_1.handleInputErrors, grades_js_1.createGrade);
gradesRouter.post('/final', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher]), (0, gradesValidation_js_1.validateCreateFinalGrade)(), middleware_js_1.handleInputErrors, grades_js_1.createFinalGrade);
gradesRouter.get('', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher, userTypes_js_1.UserType.Parent, userTypes_js_1.UserType.Student]), grades_js_1.getAllGrades);
gradesRouter.get('/latest/:studentId', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher, userTypes_js_1.UserType.Parent, userTypes_js_1.UserType.Student]), (0, gradesValidation_js_1.validateStudentId)(), middleware_js_1.handleInputErrors, grades_js_1.getThreeLatestGrades);
gradesRouter.get('/final/:studentId', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher, userTypes_js_1.UserType.Parent, userTypes_js_1.UserType.Student]), (0, gradesValidation_js_1.validateStudentId)(), middleware_js_1.handleInputErrors, grades_js_1.getFinalGrades);
gradesRouter.get('/:studentId/:subjectId', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher, userTypes_js_1.UserType.Parent, userTypes_js_1.UserType.Student]), (0, gradesValidation_js_1.validateGetGrades)(), middleware_js_1.handleInputErrors, grades_js_1.getGrades);
gradesRouter.get('/:studentId', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher, userTypes_js_1.UserType.Parent, userTypes_js_1.UserType.Student]), grades_js_1.getAllGradesForStudent);
gradesRouter.patch('/final/:gradeId', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher]), (0, gradesValidation_js_1.validateUpdateFinalGrade)(), middleware_js_1.handleInputErrors, grades_js_1.updateFinalGrade);
gradesRouter.patch('/:gradeId', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher]), (0, gradesValidation_js_1.validateUpdateGrade)(), middleware_js_1.handleInputErrors, grades_js_1.updateGrade);
gradesRouter.delete('/final/:gradeId', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher]), (0, gradesValidation_js_1.validateDeleteGrade)(), middleware_js_1.handleInputErrors, grades_js_1.deleteFinalGrade);
gradesRouter.delete('/:gradeId', auth_js_1.authenticate, (0, auth_js_1.authorize)([userTypes_js_1.UserType.Administrator, userTypes_js_1.UserType.Teacher]), (0, gradesValidation_js_1.validateDeleteGrade)(), middleware_js_1.handleInputErrors, grades_js_1.deleteGrade);
exports.default = gradesRouter;
